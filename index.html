<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>üê∏Â∞èË∑≥ËõôÂïä</title>
    <script src="./js/ajax.js"></script>
    <style>
      .container {
        width: 800px;
        margin-left: auto;
        margin-right: auto;
        padding-top: 40px;
      }
      .home-header {
        text-align: center;
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
      }
      .home-header__name {
        font-size: 34px;
        color: #284a66;
        font-size: 100;
      }
      .home-header__desc {
        color: #929292;
        font-size: 14px;
        font-style: italic;
      }
      .posts-item {
        line-height: 2;
      }
      .posts-item a {
        font-size: 16px;
        color: #284a66;
        text-decoration: none;
      }
      .posts-item a:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="home-header">
        <div class="home-header__name">
          Haokur
        </div>
        <div class="home-header__desc">
          Front End Developer
        </div>
      </header>
      <ul id="posts-list" class="posts-list"></ul>
    </div>
    <script>
      getPostsContent();

      // Ëé∑ÂèñpostsÁõÆÂΩï‰∏ãÁöÑÊâÄÊúâmarkdownÊñá‰ª∂
      function getPostsContent() {
        var getGithubContentUrl =
          "https://api.github.com/repos/haokur/haokur.github.io/contents/posts";
        ajax({
          url: getGithubContentUrl,
          method: "GET",
          format: "json",
          headers: {},
          data: {}
        }).then(res => {
          var data = JSON.parse(res);
          var mdFileNames = data.filter(item => item.name.includes(".md"));
          var postsListHtml = "";
          postsListHtml = mdFileNames
            .map(item => {
              let filename = item.name.replace(".md", "");
              return (
                '<li class="posts-item"><a target="blank" href="posts.html?source=' +
                filename +
                '">' +
                filename +
                "</a></li>"
              );
            })
            .join("");
          document.querySelector("#posts-list").innerHTML = postsListHtml;
        });
      }
    </script>
  </body>
</html>
